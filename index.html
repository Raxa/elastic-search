<!DOCTYPE html>
<html>
    <head>
        <title> simple db searching </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="lib/jquery-1.9.1.min.js"></script>
    </head>
    <body>
        <script>
            var url = 'http://localhost';
            var port = ':1024';
            function search() {
                    var data = $('#serch-value').val();
                        var json = {};
                        json.type = $('#search-type').val();
                        json.item = $('#search-item').val();
                        json.data = data;
                        var startTime = new Date();
                        $.ajax({
                            datatype: 'JSON',
                            type: 'POST',
                            url: url + port,
                            data: JSON.stringify(json),
                            success: function(result) {
                                $('#serch-results').text('');
                                var rslt = result;
                                if (rslt.result === 'error') {
                                    $('#serch-results').append("<h3>Error</h3>");
                                    $('#serch-results').append(rslt.data);
                                }
                                else {
                                    $('#serch-results').append('<h3> Take: ' + (new Date() - startTime) + 
                                            'ms, results: ' + rslt.data.length + '.</h3>');
                                    result.data.forEach(function(item) {
                                        $('#serch-results').append(JSON.stringify(item));
                                        $('#serch-results').append('<br/><br/>');
                                    });
                                }
                            }
                        });
            }
        </script>
        Select search type:
        <select id="search-type">
            <option>single</option>
            <!--<option>plain</option>-->
        </select>
        Select entities for search:
        <select id="search-item">
            <option>person</option>
            <option>patient</option>
            <option>provider</option>
            <option>drug</option>
            <option>location</option>
            <option>encounter</option>
            <option>order</option>
            <option>obs</option>
            <option>concept</option>
        </select>
        <input type="text" id="serch-value">
        <input type="button" onclick="search();" value="Search">
        <div id="serch-results">
            &nbsp;
        </div>
    </body>
</html>
